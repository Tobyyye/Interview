A: atomicity 原子性
事务(Transaction)，一般是指要做的或所做的事情。一个数据库事务通常包含对数据库进行读或写的一个操作序列。原子性保证了一个事务要么被完整地完成，要么完全没有执行。不会在结束和开始中间的某个环节。事务在执行过程中发生错误，会有数据库系统回滚到事务开始之前的状态。原子性是保证一致性的一个前提条件，但是不是充分条件，保证一致性还需要其他方法协助

C: consistency 一致性
数据库只存在两种状态，要么是事务提交之后，完成了执行并且完整地更新了磁盘当中数据库文件的状态，要么保存事务提交之前的状态。一致性保证了数据库的事务执行完成的时候，能从一个状态完整的转移到另外一个状态，并且保证数据一致。在关系型数据库上，这意味着所有的规则必须应用到所有的事务的修改上，以便维护数据完整性

### I: isolation 隔离性

数据库允许并发，数据库需要具有多个事务同时对数据进行读写和修改的能力。隔离性可以防止多个事务并发执行导致的数据不一致。事务隔离有四个等级，效果分别如下

 隔离级别                                          脏读（Dirty Read）      不可重复读（NonRepeatable Read）  幻读（Phantom Read） 

未提交读（Read uncommitted）        可能                            可能                                                    可能

已提交读（Read committed）          不可能                          可能                                                    可能

可重复读（Repeatable read）          不可能                          不可能                                                 可能

可串行化（Serializable ）                不可能                          不可能                                                不可能

===========================================================================================

![这里写图片描述](https://img-blog.csdn.net/20170731153807862?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3RhcmxoMzU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)



脏读：A提交的最新数据，B来读取读取到的却是A提交之前的数据

不可重复读：A在B事务执行过程中更改了数据，B事务本应该保证两次读取数据一致，但是数据却被A提交后的更新冲刷更新了

幻读：A在B事务执行过程中添加删除了数据，B事务读取的时候，导致结果集合变化，两次获得的结果集合不一致。



# 一、脏读、幻读和不可重复读



1、脏读：脏读就是指当一个事务正在访问数据，并且对数据进行了修改，而这种修改还没有提交到数据库中，这时，另外一个事务也访问这个数据，然后使用了这个数据。
例如：
张三的工资为5000,事务A中把他的工资改为8000,但事务A尚未提交。
与此同时，
事务B正在读取张三的工资，读取到张三的工资为8000。
随后，
事务A发生异常，而回滚了事务。张三的工资又回滚为5000。
最后，
事务B读取到的张三工资为8000的数据即为脏数据，事务B做了一次脏读。



2、不可重复读：是指在一个事务内，多次读同一数据。在这个事务还没有结束时，另外一个事务也访问该同一数据。那么，在第一个事务中的两次读数据之间，由于第二个事务的修改，那么第一个事务两次读到的的数据可能是不一样的。这样就发生了在一个事务内两次读到的数据是不一样的，因此称为是不可重复读。
例如：
在事务A中，读取到张三的工资为5000，操作没有完成，事务还没提交。
与此同时，
事务B把张三的工资改为8000，并提交了事务。
随后，
在事务A中，再次读取张三的工资，此时工资变为8000。在一个事务中前后两次读取的结果并不致，导致了不可重复读。

3、幻读：是指当事务不是独立执行时发生的一种现象，例如第一个事务对一个表中的数据进行了修改，这种修改涉及到表中的全部数据行。同时，第二个事务也修改这个表中的数据，这种修改是向表中插入一行新数据。那么，以后就会发生操作第一个事务的用户发现表中还有没有修改的数据行，就好象发生了幻觉一样。
例如：
目前工资为5000的员工有10人，事务A读取所有工资为5000的人数为10人。
此时，
事务B插入一条工资也为5000的记录。
这是，事务A再次读取工资为5000的员工，记录为11人。此时产生了幻读。



4、提醒 
不可重复读的重点是修改： 
同样的条件，你读取过的数据，再次读取出来发现值不一样了
幻读的重点在于新增或者删除： 
同样的条件，第 1 次和第 2 次读出来的记录数不一样

### D: Durability 持久性

执行完的事务，即便系统宕机了，最新的执行完的数据修改也是永久的，不会丢失。