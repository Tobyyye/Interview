https://zhuanlan.zhihu.com/p/283936459



自定义注解



反射

## **本知识**

在Java中，注解分为两种，元注解和自定义注解。

很多人误以为自定义注解就是开发者自己定义的，而其它框架提供的不算，但是其实上面我们提到的那几个注解其实都是自定义注解。

关于"元"这个描述，在编程世界里面有都很多，比如"元注解"、"元数据"、"元类"、"元表"等等，这里的"元"其实都是从meta翻译过来的。

一般我们把**元注解理解为描述注解的注解**，**元数据理解为描述数据的数据**，**元类理解为描述类的类**…

所以，在Java中，除了有限的几个固定的"描述注解的注解"以外，所有的注解都是自定义注解。



在JDK中提供了4个标准的用来对注解类型进行注解的注解类（元注解），他们分别是:

```text
@Target

@Retention

@Documented

@Inherited
```

除了以上这四个，所有的其他注解全部都是自定义注解。

这里不准备深入介绍以上四个元注解的作用，大家可以自行学习。

本文即将提到的几个例子，都是作者在日常工作中真实使用到的场景，这例子有一个共同点，那就是都用到了Spring的AOP技术。

什么是AOP以及他的用法相信很多人都知道，这里也就不展开介绍了

## **使用自定义注解做日志记录**

不知道大家有没有遇到过类似的诉求，就是希望在一个方法的入口处或者出口处做统一的日志处理，比如记录一下入参、出参、记录下方法执行的时间等。

如果在每一个方法中自己写这样的代码的话，一方面会有很多代码重复，另外也容易被遗漏。

这种场景，就可以使用自定义注解+切面实现这个功能。

假设我们想要在一些web请求的方法上，记录下本次操作具体做了什么事情，比如新增了一条记录或者删除了一条记录等。

反射 和AOP 







## **使用自定义注解做前置检查**

当我们对外部提供接口的时候，会对其中的部分参数有一定的要求，比如某些参数值不能为空等。大多数情况下我们都需要自己主动进行校验，判断对方传入的值是否合理。

这里推荐一个使用HibernateValidator + 自定义注解 + AOP实现参数校验的方式。

首先我们会有一个具体的入参类，定义如下：