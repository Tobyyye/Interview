# [记一次菜鸟网络的面试经历](https://www.cnblogs.com/zhaoguhong/p/11762116.html)

我是一个不太爱折腾的人，因此在一个公司待久了，就不太会轻易跳槽。正因为如此，我在上家公司待了整整三年，在这里，认识了一群可爱的人，便更不舍得离去。

但因为公司属于传统企业，技术上并没有太大挑战，个人也逐渐遇到了职业瓶颈，我也渐渐体会到了温水煮青蛙的感觉，看似自己已经成为团队的主程，其实与同龄人的差距越拉越大，于是依然决定换个环境。

阿里巴巴作为国内最大的互联网公司，是无数程序员的梦想，于是在七月份便投了阿里旗下菜鸟网络的简历，一个菜鸟便开始了菜鸟网络的面试之旅。

## 一面

接到菜鸟的面试电话时，还是很激动的，因为之前从来没有面试大厂的经验，便在忐忑不安中开始了面试。

面试官先让我聊了聊最近的项目，我便把项目讲了下，面试官便以此为切入点，问了一下相关的知识

> http 协议 转 dubbo 协议 怎么做的
> dubbo 的架构设计说一下
> mq 通知时，消费者没消费到怎么办
> redis 是单线程了吗？有什么好处
> 一般设置过期时间吗，业务场景有哪些，过期策略有哪些
> redis 持久化了解不,你们线上怎么用的
> 你们线上为什么这么用？只用AOF行不行
> 你有什么想问的？

一面大概用了半个小时，整体没有太大难度，更多是聊了一些项目上的东西，做了一个初步了解。

## 二面

没想到二面来的如此之快，一面结束的第二天，电话就打来了，当时我还在公交车上，便在车停站时赶紧下车，当时还下着蒙蒙细雨，我也顾不上那么多了，找个了稍微安静的角落就开始了面试。

二面问的技术面比较广，先让我聊了最近做的项目，以及让我讲了下项目中用到的单点登录的流程，接着就是java基础了

> 抽象类和接口你倾向用哪个？什么场景下用抽象类
> 如何更好的实现一个单例
> synchronized 和 lock 区别
> 公平锁和非公平锁
> 怎么实现自定注解
> 类加载机制
> 如何实现自己的classloader
> 如何动态加载类
> 如何触发full gc
> 用jvm命令如何触发

最后聊了一些开放性的问题

> 了解过netty吗
> 微服务了解过吗，Service Mesh呢
> 五亿数据，找出数量top100
> 10G数据，在内存小于10G如何分片
> 分片处理完如何汇总
> 分布在多个节点上如何汇总
> 哈希取模如何哈希？哈希冲突怎么办？能完全解决哈希冲突吗
> 数据库乐观锁和悲观锁
> 秒杀系统如何设计？
> redis分布式锁如何玩？超时时间如何设置
> zk的监听原理，你来实现你怎么做
> 主动推送怎么实现

整个面试聊下来，感觉还算不错，基本都回答出来了。

## 三面

大概又过来一周，hr通知要到现场面，约的是上午十点，为了能准时赶到，我提前一天去了杭州。

第二天早早的就起来了来到了面试地点，因为来的比较早，就坐在菜鸟大楼的外面等。七月的杭州似乎格外的热，看着菜鸟大厦的人进进出出，每个人似乎都很忙，我不由的想，自己今后是否有幸也能成为他们中的一员。

三面的形式完全出乎我意料，来了两个面试官，先做了自我介绍，便开始了面试。

整个面试过程都让我在黑板上画图讲解，他们会不间断的提问并做记录。

先是让我画了项目的架构图，面试官指出了我项目中存在的一些问题问我如何解决，然后穿插着对项目中用到的一些技术进行提问

> 消息如何保证一定被消费，如何没有消费到怎么办
> Redis 怎么保证不丢数据，能不能保证严格意义的一定不会丢
> Redis 集群，生产环境Redis 如何做数据迁移
> 一致性hash算法
> 数据库是怎么保证一定不会丢失数据的
> 浏览器敲入一个域名，尽可能详情的说下接下来网络协议层面发生了什么
> 了解过哪些锁，volatile 说下

三面持续了大概一个小时，面的不太好，主要是网络协议那一块，我回答的太烂了

## 四面

四面是一个看起来非常平易近人的大叔，全程微笑和我聊天，没有一点架子，应该是 `Team Leader`。

整个过程没有聊技术细节，主要聊了一些技术的方向，业务的理解，过往的经历。整个过程还是聊的很愉快的。

## 复盘

整个面试过程问的知识点并不算难，也没有很偏的题，很多都是开放性的问题。

例如redis在生产环境做数据迁移，一个只看过几篇博客的人和一个确实亲身经历过这种场景的人，回答的绝对有差别，而正是这种问题，才能看出来差距。

遗憾的是最后还是没通过面试，我觉得原因主要如下

1. 面试阿里过于匆忙，没有做好准备，也没有先拿小公司练手
2. 基础知识仍有欠缺，例如网络协议和算法一直都是我的弱项
3. 因为一直在传统企业，缺乏互联网项目实战经验，虽然自己看过许多这方面的知识，知识广度还算可以，但更多是纸上谈兵，缺乏实践
4. 四面时自己犯了一个严重的错误，因为面试官属于比较和气且聊得来的类型，导致我在聊天的过程中过于随意，说话没有做到有的放矢，该说的不该说的都说了，给人一种过于浮躁的感觉。

## 面试要注意什么

在我看来，面试不仅仅是实力加运气，个人发挥也很重要，有的人面试经常能发挥百分之一百二的实力，我总结了几点

1. 不卑不亢，面试是一个互相认同的过程，既不能狂妄自大，也不要妄自菲薄。
2. 讲话要有逻辑，做到条理清晰，层次分明。我身边有同事技术明明不差，但讲问题时却抓不到重点，听他说话总让人有种一头雾水的感觉。
3. 个人外在情绪展现可以随着面试官情绪稍作调整，这样易于拉近和面试官的关系。但你的内在情绪不应该受影响，自信，沉稳应该一直保持。
4. 遇到不是特别清楚的，可以讲一下自己的思路，或者在征求面试官同意的情况下，讲一下类似问题的解决方案。
5. 如果问题实在不会，不要强答，直接说不会，要及时止损，避免越陷越深。
6. 面试有一定的运气成分，但可以引导面试官到自己擅长的方向上去，但不要强行带节奏。

## 写在最后

虽然没能进阿里，但我并不沮丧，只是有些遗憾。毕竟在这条路上，我一直在努力，过程已经足够丰富多彩，结果已然没那么重要，顺其自然就好。

生活本就是一个不可预知的过程，只要朝着更好的方向前进就好。况且，塞翁失马焉知非福，现在我入职了一家很不错的互联网公司，做的是自己喜欢的中间件研发，而且又遇到了一群可爱又有趣的人。这样的结果，我已然满足。



2019年2月中旬的时候，在boss直聘上无意间看到了阿里巴巴菜鸟网络的招聘信息，现在的部门已经有两名同学被蚂蚁金服录取了，自己就不服气的也想试试。这次面试其实并没有准备充分，之前就听说总共有很多轮数，不仅会考察基础知识的深度，也会考察算法能力、项目设计能力、价值观世界观等。自己抱着能走多远走多远的态度，挑战一下自己。
在发过去简历的一周后，大概是2月28号左右，一面的小哥哥下午打来电话约我2月28号晚上9点钟面试。结果在2月29白天的时候，我基本上都没有怎么工作，而是把我平时积累的一些基础知识总结了一下，能总结多深就总结深。到了晚上9点左右，电话响了起来。
一面：
面试官还是比较温柔的，上来先让我做了自我介绍，我简单介绍了一下自己有2年半的工作经验，之前做过什么项目，用了什么技术等等，面试官没有详细问项目的细节，但是项目的具体的功能和业务一定要讲清楚。中间穿插着会问到一些基础知识。总共面试了50多分钟，java基础能问的基本都问完了，基本的内容包括
1、从JVM到垃圾回收，最后一个问题好像是fullgc是否可以回收方法区
2、从线程池的构造函数参数到队列的拒绝策略
3、redis支持的数据类型到跳跃表，redis同步策略，如何自己实现lru等
4、mysql索引的数据结构，为什么用B+树不用B树，事务隔离级别，聚集锁非聚集锁，这个地方着重点一下，问到了一个非常细节的问题，如何用可重复读的隔离级别避免幻读问题。当时这个问题没有答出来，后来上网查了后可以使用间隙锁来实现。
5、spring相关、bean的生命周期等，最后问到循环引用问题spring如何处理的。
6、concurrentHashmap1.8为什么放弃了分段锁
7、数据库分库分表相关
其他的记不清了，就记得只要是跟java基础相关的基本都提到了，个人感觉一面还是以知识的广度为主。一面结束大概一周多后，大概在3月3号，接到了二面的电话，由于当时在地铁上太吵了，我就约了3月5号晚上8点半面试。到了3月4号5号的白天，又是基本上没有怎么工作，都在总结面试的东西，到了3月5号晚上晚上8点半，二面电话如期响了起来：
二面：
二面上来也是做了一个简单的自我介绍，然后简单介绍了自己的项目，感觉二面和一面最大的不同是，二面时候以知识的深度和解决问题的能力为主。主要涉及到的问题大概有：
1、springAOP的原理，动态代理是怎么实现的，这个地方我基本上把动态代理的源码说了一遍。
2、fullgc的时候会导致接口的响应速度特别慢，该如何排查和解决。
3、snmp协议的相关知识
4、netty的相关知识，如何避免的NIO空循环问题，还有零拷贝等
5、问了一些简单的算法，说了一下自己的思路
剩下的记不清了，大概面了有40分钟多一点。二面面完个人感觉还是非常好的，当时也比较自信自己可以进入三面，果然在大概一周左右，如期接到了三面的电话。
三面：
三面的面试官也是比较温柔的，三面和前两面最大的不同是这次的面试官特别关注项目的实现和细节，由于我最近一年做的是一个监控系统，从最开始的项目为什么要分这几个模块到每个模块做的事情用的技术和存在的意义，都需要解释的非常清楚，中间如果他有疑问的话就会立马打断来问问题，现在做的项目其实并没有太多的亮点。面试中间还提到了kafka的replicas的作用还有他为什么比其他的消息队列好等等。最后给了我一个微博评论长链接短链接的问题，让我设计一个服务来处理长链接短链接，包括怎么读怎么存等。面完三面后，面试官告诉我如果有四面的话，四面就要来杭州面了。当时心情十分复杂。
四面：
大概三面结束又过了一周后，接到了hr的电话约我3月22号周五上午11点半到杭州菜鸟总部参加面试。提前一天给现公司请了假后，22号早上5点半就起床去虹桥火车站了，大概10点的时候到的菜鸟总部，随便吃了点东西，打印了两份简历，等到11点半准时联系的hr。hr把我带到会议室中，路上我还大概了解了一下面试后面的流程，说这次第四面是两名p8的面试官一起面的，如果这轮能过的话，下一轮就是最终p9大boss和hr一起了。大概在会议室等了5分钟左右，两名面试官来了，也是简单做了自我介绍后，这两名面试官就让我在白板上画最近负责的项目的流程图，个人感觉这一轮面试着重点是项目设计上，中间会穿插很多问题来问我为什么当初要这样设计？这样设计的好处是什么？有没有更好的设计方式？项目的数据量有多大？如果再增大100倍呢？碰到的真正的难题是什么？这两位面试官面了大概一个小时。
四面面试结束后，让我在会议室等结果，当时心里真是度秒如年啊，大概这两位面试官和hr讨论了20分钟后，hr进来告诉我说不好意思这一轮面试没有通过，今天的面试流程就此结束了。
其实四面就发生在昨天，心里说不难过肯定是骗人的，这一个月以来每一轮都是煎熬啊，我觉得第四轮挂掉肯定是有很多原因的，自己的项目设计能力太差了，在分析项目的时候很多种情况没有考虑到，估计面试官对我设计的思路不满意是我最大的减分项。
不管怎么说，生活还要继续，有些东西没有第二次机会，我觉得面试道路上最大的收获就是我要搞明白我是怎么失败的。接下来我的打算是在好好干好手头工作的同时，要做好这三件事情：
1、zookeeper和netty的书好好看完
2、算法要补一补了，开始刷leetcode
3、项目设计方面做一个单独的培训，找一个大神先聊一聊，或者博客大神能否给一些建议，这一块确实是我的短板。

另外，我要特别感谢两个朋友，一个是前同事K，他现在是阿里云的p7同学，在这一个月里他一直在告诉我应该如何跟阿里面试官沟通，要注意哪些知识点等，还一直在帮我关注着面试流程。第二个要感谢的朋友是现同事GH，很难过他下周就要去蚂蚁了，在这一个月的时间里GH一直在鼓励我加油面试，在我准备面试的工作日里，他也一直在帮我解决一些我头上的棘手问题。最后我想给自己说的是，失败并不可怕，可怕的是不知道自己为何失败。祝有和我相同经历的朋友们也不要被失败打败，希望我们都可以脚下有风、各自灿烂！