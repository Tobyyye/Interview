字符串类型和数字类型索引的效率？

数据类型隐式转换 



 1.数字查询肯定比字符串快，基于数字比较的话：CPU运算量肯定更少，需要的内存、逻辑IO和物理IO更少； 



 如果是整形类型的索引会不会有溢出的风险？ 

肯定是整型好啦

基于使用的容器考虑，如果是c数组，只能用数字。如果是stl容器，例如map，由于底层数据结构为红黑树使用整型作为其索引值。使用字符串，就需要计算其哈希值转换为整型数值。而这个哈希值的计算过程又会消耗一定性能，所以直接用整型比较好，即使你提供更优秀的哈希算法也没有避免计算直接用整型好。





 性能相当，mysql中区别性能的是采用哪种索引方式，而不是索引的数据类型。
MySQL的btree索引和hash索引的区别
hash 索引结构的特殊性，其检索效率非常高，索引的检索可以一次定位，不像btree(B-Tree)索引需要从根节点到枝节点，最后才能访问到页节点这样多次的IO访问，所以 hash 索引的查询效率要远高于 btree(B-Tree) 索引。

虽然 hash 索引效率高，但是 hash 索引本身由于其特殊性也带来了很多限制和弊端，主要有以下这些。
（1）hash 索引仅仅能满足=，<=>，IN，IS NULL或者IS NOT NULL查询，不能使用范围查询。
由于 hash 索引比较的是进行 hash 运算之后的 hash 值，所以它只能用于等值的过滤，不能用于基于范围的过滤，因为经过相应的 hash 算法处理之后的 hash 值的大小关系，并不能保证和hash运算前完全一样。

（2）hash 索引无法被用来避免数据的排序操作。
由于 hash 索引中存放的是经过 hash 计算之后的 hash 值，而且hash值的大小关系并不一定和 hash 运算前的键值完全一样，所以数据库无法利用索引的数据来避免任何排序运算；

（3）hash 索引不能利用部分索引键查询。
对于组合索引，hash 索引在计算 hash 值的时候是组合索引键合并后再一起计算 hash 值，而不是单独计算 hash 值，所以通过组合索引的前面一个或几个索引键进行查询的时候，hash 索引也无法被利用。

（4）hash 索引在任何时候都不能避免表扫描。
前面已经知道，hash 索引是将索引键通过 hash 运算之后，将 hash运算结果的 hash 值和所对应的行指针信息存放于一个 hash 表中，由于不同索引键存在相同 hash 值，所以即使取满足某个 hash 键值的数据的记录条数，也无法从 hash 索引中直接完成查询，还是要通过访问表中的实际数据进行相应的比较，并得到相应的结果。

（5）hash 索引遇到大量hash值相等的情况后性能并不一定就会比B-Tree索引高。
对于选择性比较低的索引键，如果创建 hash 索引，那么将会存在大量记录指针信息存于同一个 hash 值相关联。这样要定位某一条记录时就会非常麻烦，会浪费多次表数据的访问，而造成整体性能低下 



字符串索引与数字索引有一些方面如果没做好会非常的慢了，今天我们就一起来看看小编整理的一些mysql中字符串索引问题与例子了，因为字符索引相对来说也简单文章就简单的整理了一些例子，希望对各位有帮助。

事情的起因是线上日志发现的mysql慢查询。

100万数据量的标准，联合查询全部走索引的情况下，尽然要600多毫秒。

很不解，但是将索引列由varchar(50)型改为bigint型后，数据提升了30倍。

究其原因就索引树上搜索时要进行大量的比较操作，而字符串的比较比整数的比 较耗时的多。

所以建议一般情况下不要在字符串列建立索引，如果非要使用字符串索引，可以采用以下两种方法：　　1.只是用字符串的最左边n个字符建立索引，推荐n=10;比如index left(address,8),但是需要知道前缀索引不能在order by中使用，也不能用在索引覆盖上。

2.对字符串使用hash方法将字符串转化为整数，address_key=hashToInt(address)，对address_key建立索引，查询时可以用如下查询where address_key = hashToInt(beijing,china) and address = beijing,china;　　例子　　我在下列语句中发现了一个问题：　　select * from region where city like 任丘% limit 10;　　select * from region where city like 商丘% limit 10;　　这两个语句的结果是一样的，　　类似的情况如下：　　select * from region where city like 临安市% limit 10;　　select * from region where city like 六安市% limit 10;　　临海市 龙海市　　枣阳市 益阳市　　温州市 梧州市
