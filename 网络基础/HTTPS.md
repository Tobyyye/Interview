二、HTTPS
简述

HTTPS ，实际就是在 TCP 层与 HTTP 层之间加入了 SSL/TLS 来为上层的安全保驾护航，主要用到对称加密、非对称加密、证书，等技术进行客户端与服务器的数据加密传输，最终达到保证整个通信的安全性。

一句话概括：HTTP + 加密 + 认证 + 完整性保护 = HTTPS 。
SSL和TLS

官方定义，SSL 是安全套接层(secure sockets layer)；TLS 是 SSL 的继任者，叫传输层安全(transport layer security)。

它们存在的唯一目的就是保证上层通讯安全的一套机制。它的发展依次经历了下面几个时期，像手机软件升级一样，每次更新都添加或去除功能，比如引进新的加密算法，修改握手方式等。

    SSL1.0: 已废除
    
    SSL2.0: RFC6176 ，已废除
    
    SSL3.0: RFC6101 ，基本废除
    
    TLS1.0: RFC2246 ，目前大都采用此种方式
    
    TLS1.1: RFC4346
    
    TLS1.2: RFC5246 ，没有广泛使用
    
    TLS1.3: IETF 正在酝酿中
    
    为了下面描述方便，统一先叫 SSL 。

SSL/TLS 协议作用

    认证用户和服务器，确保数据发送到正确的客户机和服务器。
    
        客户端必须避免中间人攻击，即除了真正的服务器，任何第三方都无法冒充服务器。
    
    加密数据以防止数据中途被窃取。
    
    维护数据的完整性，确保数据在传输过程中不被改变。
HTTPS实现的过程
1.建立连接获取证书

SSL 客户端通过 TCP 和服务器建立连接之后(443 端口)，并且在一般的 tcp 连接协商(握 手)过程中请求证书。即客户端发出一个消息给服务器，这个消息里面包含了自己可实现的算法列表和其它一些需要的消息，SSL 的服务器端会回应一个数据包，这里面确定了这次通信所需要的算法，然后服务器向客户端返回证书。(证书里面包含了服务器信息:域名，申请证书 的公司，公共秘钥)。
2.证书验证

Client 在收到服务器返回的证书后，判断签发这个证书的公共签发机构，并使用这个机构的公 共秘钥确认签名是否有效，客户端还会确保证书中列出的域名就是它正在连接的域名。
3.数据加密和传输

如果确认证书有效，那么生成对称秘钥并使用服务器的公共秘钥进行加密。然后发送给服务器，服务器使用它的私钥对它进行解密，这样两台计算机可以开始进行对称加密进行通信。

HTTP 和 HTTPS 的区别

    端口不同：HTTP 与 HTTPS 使用不同的连接方式，用的端口也不一样，前者是 80，后者是 443。
    
    资源消耗：和 HTTP 通信相比，HTTPS 通信会由于加解密处理消耗更多的 CPU 和内存资源。
    
    开销：HTTPS 通信需要证书，而证书一般需要向认证机构申请免费或者付费购买。
    
        HTTPS 可以有效的防止运营商劫持，解决了防劫持的一个大问题。
