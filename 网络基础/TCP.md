https://www.cnblogs.com/fundebug/p/differences-of-tcp-and-udp.html



https://zhuanlan.zhihu.com/p/108579426

### 四、TCP和UDP的比较

#### 1. 对比

|              | UDP                                        | TCP                                    |
| :----------- | :----------------------------------------- | :------------------------------------- |
| 是否连接     | 无连接                                     | 面向连接                               |
| 是否可靠     | 不可靠传输，不使用流量控制和拥塞控制       | 可靠传输，使用流量控制和拥塞控制       |
| 连接对象个数 | 支持一对一，一对多，多对一和多对多交互通信 | 只能是一对一通信                       |
| 传输方式     | 面向报文                                   | 面向字节流                             |
| 首部开销     | 首部开销小，仅8字节                        | 首部最小20字节，最大60字节             |
| 适用场景     | 适用于实时应用（IP电话、视频会议、直播等） | 适用于要求可靠传输的应用，例如文件传输 |





#### 2. 总结

- TCP向上层提供面向连接的可靠服务 ，UDP向上层提供无连接不可靠服务。
- 虽然 UDP 并没有 TCP 传输来的准确，但是也能在很多实时性要求高的地方有所作为
- 对数据准确性要求高，速度可以相对较慢的，可以选用TCP





TCP与UDP区别
\1. 基于连接vs无连接
TCP是面向连接的协议，而UDP是无连接的协议。这意味着当一个客户端和一个服务器端通过TCP发送数据前，必须先建立连接，建立连接的过程也被称为TCP三次握手。
\2. 可靠性
TCP提供交付保证，这意味着一个使用TCP协议发送的消息是保证交付给客户端的，如果消息在传输过程中丢失，那么它将重发。UDP是不可靠的，它不提供任何交付的保证，一个数据报包在运输过程中可能会丢失。
\3. 有序性
消息到达网络的另一端时可能是无序的，TCP协议将会为你排好序。UDP不提供任何有序性的保证。
\4. 速度
TCP速度比较慢，而UDP速度比较快，因为TCP必须创建连接，以保证消息的可靠交付和有序性，他需要做比UDP多的事。这就是为什么UDP更适用于对速度比较敏感的应用。TCP适合传输大量数据，UDP适合传输少量数据。
\5. 重量级vs轻量级
TCP是重量级的协议，UDP协议则是轻量级的协议。一个TCP数据报的报头大小最少是20个字节，UDP数据报的报头固定是8个字节。TCP报头中包含序列号，ACK号，数据偏移量，保留，控制位，窗口，紧急指针，可选项，填充项，校验位，源端口和目的端口。而UDP报头只包含长度，源端口号，目的端口号，校验和。
\6. 流量控制和拥塞控制
TCP有流量控制和拥塞控制。UDP没有流量控制和拥塞控制。
\7. TCP是面向字节流，UDP是面向报文的
TCP是字节流的协议，无边界记录。
UDP发送的每个数据报是记录型的数据报，所谓的记录型数据报就是接收进程可以识别接收到的数据报的记录边界。
\8. TCP只能单播，不能广播和组播；UDP可以广播和组播


**TCP应用场景**：效率要求相对低，但对准确性要求相对高的场景。因为传输中需要对数据确认，重发，排序等操作，相比之下效率没有UDP高。举几个例子：文件传输、邮件传输、远程登录。
**UDP应用场景**：效率要求相对高，对准确性要求相对低的场景。举几个例子：QQ聊天、QQ视频，网络语音电话（即时通讯，要求速度高，但是出现偶尔断续不是太大问题，并且此处完全不可以使用重传机制）、广播通信（广播、多播）。

为什么TCP比UDP安全，但是还有很多用UDP？
\1. 无需建立连接（减少延迟）；
\2. 无需维护连接状态；
\3. 头部开销小，一个TCP数据报的报头大小最少是20字节，UDP数据报的报头固定是8个字节；
\4. 应用层能更好地控制要发送的数据和发送时间。UDP没有拥塞控制，因此网络中的拥塞不会影响主机的发送频率。某些实时应用要求以稳定的速度发送数据，可以容忍一些数据的丢失，但不允许有较大的延迟，而UDP正好满足这些应用的需求。

UDP为何快？
\1. 不需要建立连接；
\2. 对于收到的数据，不用给出确认；
\3. 没有超时重传机制；
\4. 没有流量控制和拥塞控制。



**tcp 有哪些机制确保可靠性？**

TCP 通过以下机制来提供可靠通信：

1 连接管理
1.1 TCP通过三次握手建立连接

TCP三次握手的目的：

    确认需要连接的服务器 IP地址和端口是否存在，而不是像UDP一样直接发送。
    指定自己的初始化序列号，为后面的可靠性传输做准备
    同步连接双方的序列号和确认号
    交换TCP窗口大小的信息

1.2 TCP通过四次挥手断开连接

因为TCP是全双工通信，如果一方不想进行通信，则必须通过通知的方式来告诉对方，否则对方无法收到ack而不断进行重发，由于是全双工通信，两边需要分别进行通知对方来断开连接。
2 校验和机制
3 序列号机制
3.1 分片
3.2 拆包与组包
3.3 根据包的序列号对 重复、丢失的包进行处理
4 ACK机制
5 重传定时器功能
6 流量控制：滑动窗口机制
7 拥塞控制



**拥塞控制怎么实现？**

https://blog.csdn.net/qq_41431406/article/details/97926927



 [**close_wait 太多怎么处理？为什么会出现这种情况](.\网络基础\close_wait 太多怎么处理.md )？****



 **讲讲三次握手，**四次挥手







